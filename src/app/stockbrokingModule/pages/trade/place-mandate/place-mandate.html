<ion-header>
  <ion-navbar>
    <ion-title>PlaceMandate</ion-title>
  </ion-navbar>
</ion-header>

<ion-content no-padding>
  <csmobile-switch-portfolio [showCashAvailableForTrading]="true" [showTotalValue]="false" [hidden]="hideSwitchPortfolio">
  </csmobile-switch-portfolio>

  <form novalidate [formGroup]="mandateForm">
    <ion-grid class="pt0">

      <!-- Market and Limit Segments -->
      <ion-row class="">
        <ion-col>
          <div no-padding>
            <ion-segment class="csp--segment" formControlName="priceOption">
              <ion-segment-button value="LIMIT">
                LIMIT
              </ion-segment-button>
              <ion-segment-button value="MARKET">
                MARKET
              </ion-segment-button>
            </ion-segment>
          </div>
        </ion-col>
      </ion-row>
      <!-- EOF Market and Limit Segments -->

      <!-- SYMBOL AND QUANTITY HELD -->
      <ion-row>
        <!-- Symbol -->
        <ion-col class="pt0 pb0">
          <ion-item>
            <ion-label color="primary" floating>Symbol</ion-label>
            <ion-select formControlName="security" [class.invalid]="!security.valid && (security.dirty || submitAttempt)">
              <ion-option *ngFor="let security of securities" [value]="security">{{security}}</ion-option>
            </ion-select>
          </ion-item>
          <p class="error-message-text" *ngIf="!security.valid && (security.dirty || submitAttempt)">Please select a security to trade.</p>
        </ion-col>

        <!-- Units Owned [optional, dependent on symbol] -->
        <ion-col class="pt0 pb0" id="unitsOwnedCol">
          <ion-item>
            <ion-label color="primary" floating>Units Owned</ion-label>
            <ion-input type="number" placeholder="" [value]="unitsOwned" disabled readonly></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- EOF SYMBOL AND QUANTITY HELD -->

      <!-- Limit Orders -->
      <ion-row class="pt0 pb0" *ngIf="priceOption.value === 'LIMIT'">
        <ion-col>
          <!-- Quantity -->
          <ion-item>
            <ion-label color="primary" floating>Quantity</ion-label>
            <ion-input type="number" placeholder="" formControlName="quantity" [class.invalid]="!quantity.valid && (quantity.dirty || submitAttempt)"></ion-input>
          </ion-item>
          <p class="error-message-text" *ngIf="!quantity.valid && (quantity.dirty || submitAttempt)">Please enter a valid quantity.</p>
        </ion-col>
        <ion-col>
          <!-- Limit Price [optional] -->
          <ion-item>
            <ion-label color="primary" floating>Limit Price</ion-label>
            <ion-input type="number" placeholder="" formControlName="limitPrice"></ion-input>
          </ion-item>
          <p class="error-message-text" *ngIf="!validLimitPrice && (limitPrice.dirty || submitAttempt)">Please enter a limit price type.</p>
        </ion-col>
      </ion-row>
      <!-- EOF Limit Orders -->

      <!-- Market Orders -->
      <ion-row *ngIf="priceOption.value === 'MARKET'">
        <ion-col>
          <!-- Quantity -->
          <ion-item>
            <ion-label color="primary" floating>Quantity</ion-label>
            <ion-input type="number" placeholder="" formControlName="quantity" [class.invalid]="!quantity.valid && (quantity.dirty || submitAttempt)"></ion-input>
          </ion-item>
          <p class="error-message-text" *ngIf="!quantity.valid && (quantity.dirty || submitAttempt)">Please enter a valid quantity.</p>
        </ion-col>
      </ion-row>
      <!-- EOF Market Orders -->

      <!-- Order Terms -->
      <ion-item>
        <ion-label color="primary" floating>Order Term</ion-label>
        <ion-select formControlName="orderTerm" [class.invalid]="!orderTerm.valid && (orderTerm.dirty || submitAttempt)">
          <ion-option *ngFor="let tradeOrderTerm of tradeOrderTerms" [value]="tradeOrderTerm.name">{{ tradeOrderTerm.label }}</ion-option>
        </ion-select>
      </ion-item>
      <p class="error-message-text" *ngIf="!orderTerm.valid && (orderTerm.dirty || submitAttempt)">Please an order term.</p>
      <!-- EOF Order Terms -->

      <!-- Buy and Sell Buttons -->
      <ion-row class="mt10">
        <ion-col>
          <button full ion-button class="br5" [disabled]='!canBuy' (click)="previewMandate('BUY')">BUY</button>
        </ion-col>
        <ion-col>
          <button full ion-button color="danger" id="sellButton" class="br5" [disabled]='!canSell' (click)="previewMandate('SELL')">SELL</button>
        </ion-col>
      </ion-row>
      <!-- EOF Buy and Sell Buttons -->

    </ion-grid>
  </form>

  <!-- Place Mandate Form -->


</ion-content>